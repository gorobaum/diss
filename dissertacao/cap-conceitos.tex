%% ------------------------------------------------------------------------- %%
\chapter{Conceitos}
\label{cap:conceitos}



Explicar gigapixel
explicar gpgpu
explicar registro
explicar os algoritmos estudados

%% ------------------------------------------------------------------------- %%
\section{Registro}\index{Registro}
\label{sec:fundamentos}

    O registro é responsável pela construção da imagem \textit{Gigapixel}, determinando como será a sobrepossição de
fotos vizinhas. A partir do método e do equipamento utilizado para a captura das fotos é possível determinar a região
nas bordas das fotos na qual a interseecção esta. Duas regiões de fotos vizinhas são utilizadas como a entrada para o 
algoritmo de registro. Ele é então executado gerando o campo vetorial de deslocamento que será aplicado aos pixels de 
uma das imagens para que a fusão delas pareça o mais natural possivel. Chamaremos a imagem que não irá sofrer ação do 
campo vetorial de imagem de Referência (R) e a outra imagem de imagem Alvo (A). 

Podemos definir o processo de registro com a seguinte equação, como \cite{brown1992survey} fez em seu estudo:
\begin{align}\label{eq:defregistro}
    R(x,y) = g(A(f(x,y)))
\end{align}
    Onde $f(x,y) = (x',y')$ é uma função que representa o deslocamento do campo vetorial encontrado pelo registro e 
$g$ é uma função que modifica a intensidade dos pixels, se for necessário. Cada algoritmo de registro utiliza um método
diferente para encontrar a função de transformação $f$, mas os passos gerais são:
\begin{enumerate}
    \item Detecção de caracteristicas;
    \item Correspondência de caracteristicas;
    \item Estimação da função de transofrmação;
    \item Reamostragem da imagem Alvo.
\end{enumerate}
    É importante salientar que nem todos algoritmos de registro seguem essa lista a risca, e mesmo que sigam eles ainda
podem realizar mais de um passo por vez. Os passos gerais são representados na imagem \ref{fig:regExplicacao}. 
Vamos tratar brevemente dos passos nas seções abaixo.
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figuras/regSteps.jpg}
    \caption{Na primeira linha estam a imagem referência e a alvo, respectivamente. Na segunda linha as características
da imagem referência foram encontradas e suas correspondentes na imagem Alvo. A última linha mostra a estimação da 
função e a sua reamostragem da imagem Alvo. \citep{zitova2003image}}
    \label{fig:regExplicacao}
\end{figure}

%% ------------------------------------------------------------------------- %%
\subsection{Detecção de caracteristicas}\index{Detecção de caracteristicas}
\label{sec:dec_corr_carac}

    O primeiro passo para um algoritmo de registro é a localização de estruturas de destaque dentro de uma cena ou de
um objeto. Tais estruturas devem ser facilmente identificadas em fotos obtidas sob outra perspectiva ou ângulação. 
Elas são separadas em 3 grupos:

\textbf{Características de Região} - São demarcadas como regiões de alto contraste dentro da imagem. Lagos, florestas ou
regiões urbanas são exemplos desse tipo de característica. Sua detecção é feita utilizando algoritmos de segmentação.

\textbf{Características de Linha} - São linhas encontradas dentro da imagem. Podem ser ruas, rios ou o litoral. Métodos
clássicos de detecção de bordas como o Canny ou o filtro laplaciano são usados para identificar essas características.

\textbf{Características de Ponto} - São pontos de intersecção entre linhas, representados por intersecções de ruas ou
rios, ou pontos de máxima curvatura. Algoritmos para identificação de pontos utilizam técnicas mais avançadas, dada a 
dificuldade de encontrá-los. Os mais básicos encontram as intersecções de linhas enquanto os mais avançados buscam
centróides de regiões ou o máximo local de uma \textit{wavelet}.

    Dada a importância desse passo, vários algoritmos foram desenvolvidos com o passar dos anos para resolver de maneira
rápida e eficiente a detecção de caracteristicas. Alguns dos mais famosos, como o 
\textit{Scale Invariant Feature Transform} (SIFT) , introduzido por \cite{lowe1999object}, transforma uma imagem em uma 
coleção de vetores de caracteristicas locais, que são usados para identidicar as caracteristicas. Outro algoritmo famoso,
desenvolvido por \cite{bay2006surf}, o \textit{Speeded Up Robust Features} (SURF) utiliza o determinante da matriz de
Hessian para identificar regiões da imagem que tenham um valor diferenciado para alguma propriedade, como brilho, de 
regiões vizinhas. Ao identificar uma região, ele cálcula a caracteristica dela utilizando a soma dos 
\textit{Wavelets de Haar}.

\subsection{Correspondência de caracteristicas}\index{Correspondência de caracteristicas}

    Com as caracteristiscas de cada uma das imagens encontradas, o próximo passo é realizar a correspondencia entre elas.
A primeira soluço a ser apresentada, a Correspondência por Área, mescla o passo de Detecção com o de Correspondência. 
Ele utiliza duas janelas, uma para cada imagem, de formato retangular ou circular, e utiliza metricas para enumerar a 
relação entre elas. O algoritmo então move as janelas dentro das imagens afim de encontrar o par que tem a máxima
relação entre si. Várias métricas podem ser utilizadas, como a Correlação entre as intensidades das janelas, o estudo
do spectro da transformada de \textit{Fourier} das janelas ou o cálculo da informação mutua entre elas. 


\bibliographystyle{plainnat-ime} % citação bibliográfica textual
\bibliography{bibliografia}  % associado ao arquivo: 'bibliografia.bib'